import sysimport datetimefrom PyQt5 import QtWidgetsfrom PyQt5 import QtGuifrom PyQt5.QtWebEngineWidgets import QWebEngineViewfrom shipan.shipan import ShiPan, MinGPanfrom common import GetShiChen, GetLi,DiZHiList# Create applicationapp = QtWidgets.QApplication(sys.argv)# Create main windowwindow = QtWidgets.QMainWindow()window.setWindowTitle("大六壬")# Create main layoutlayout = QtWidgets.QHBoxLayout()# Create main widget and set the layoutmainWidget = QtWidgets.QWidget()mainWidget.setLayout(layout)# Create a line edit and add it to the layouttextBrowser = QWebEngineView()# textBrowser = QtWidgets.QTextBrowser()layout.addWidget(textBrowser)# font=QtGui.QFont()# font.setPixelSize(18)# textBrowser.setFont(font)# font := gui.NewQFont()# font.SetPixelSize(18)# textBrowser.SetFont(font)# //textBrowser.SetLineWidth(1000)# layout.AddWidget(textBrowser, 0, 0)# 设置右则面板rightWidget = QtWidgets.QWidget()rightWidget.setFixedWidth(100)layout.addWidget(rightWidget)# 为右则面板使用水平布局rightVBoxLayout = QtWidgets.QVBoxLayout()rightWidget.setLayout(rightVBoxLayout)## // 设置输入验证# //	regx := core.NewQRegExp()# //	regx.SetPattern("^(0|[1-9][0-9]*|-[1-9][0-9]*)$")# //	validator := gui.NewQRegExpValidator(nil)# //	validator.SetRegExp(regx)#yearInput = QtWidgets.QLineEdit()yearInput.setPlaceholderText("年 1920-2050")yearInput.setValidator(QtGui.QIntValidator(1920, 2050, yearInput))rightVBoxLayout.addWidget(yearInput)monthInput = QtWidgets.QLineEdit()monthInput.setPlaceholderText("月")monthInput.setValidator(QtGui.QIntValidator(1, 12, monthInput))rightVBoxLayout.addWidget(monthInput)dayInput = QtWidgets.QLineEdit()dayInput.setPlaceholderText("日")dayInput.setValidator(QtGui.QIntValidator(1, 31, dayInput))rightVBoxLayout.addWidget(dayInput)hourInput = QtWidgets.QLineEdit()hourInput.setPlaceholderText("时")hourInput.setValidator(QtGui.QIntValidator(0, 23, hourInput))rightVBoxLayout.addWidget(hourInput)minutesInput = QtWidgets.QLineEdit()minutesInput.setPlaceholderText("分")minutesInput.setValidator(QtGui.QIntValidator(0, 59, minutesInput))rightVBoxLayout.addWidget(minutesInput)secondInput = QtWidgets.QLineEdit()secondInput.setPlaceholderText("秒")secondInput.setValidator(QtGui.QIntValidator(0, 59, minutesInput))rightVBoxLayout.addWidget(secondInput)# yueJiangHBoxLayout=QtWidgets.QHBoxLayout()yueJiang = QtWidgets.QComboBox()yueJiang.addItems(DiZHiList)# yueJiangWidge=QtWidgets.QWidget()# yueJiangHBoxLayout.addWidget(QtWidgets.QLabel("月将"))# yueJiangHBoxLayout.addWidget(yueJiang)# yueJiangWidge.setLayout(yueJiangHBoxLayout)# rightVBoxLayout.addWidget(yueJiangWidge)rightVBoxLayout.addWidget(QtWidgets.QLabel("月将"))rightVBoxLayout.addWidget(yueJiang)zhanShi = QtWidgets.QComboBox()zhanShi.addItems(DiZHiList)rightVBoxLayout.addWidget(QtWidgets.QLabel("占时"))# zhanShi.setPlaceholderText("占时")# minutesInput.setValidator(QtGui.QIntValidator(0, 59, minutesInput))rightVBoxLayout.addWidget(zhanShi)zhouZhan = QtWidgets.QComboBox()zhouZhan.addItems(["是", "否"])rightVBoxLayout.addWidget(QtWidgets.QLabel("昼占/昼生人"))rightVBoxLayout.addWidget(zhouZhan)mingJu = QtWidgets.QComboBox()mingJu.addItems(["否", "是"])rightVBoxLayout.addWidget(QtWidgets.QLabel("命局"))rightVBoxLayout.addWidget(mingJu)rightVBoxLayout.addWidget(QtWidgets.QLabel("占测之事"))占测的事Input = QtWidgets.QLineEdit()rightVBoxLayout.addWidget(占测的事Input)button = QtWidgets.QPushButton("起六壬局")rightVBoxLayout.addWidget(button)shenSha = QtWidgets.QPushButton("神煞查询")rightVBoxLayout.addWidget(shenSha)rightVBoxLayout.addStretch()# 设置默认时间nowDateTime = datetime.datetime.today()yearInput.setText("{}".format(nowDateTime.year))monthInput.setText("{}".format(nowDateTime.month))dayInput.setText("{}".format(nowDateTime.day))hourInput.setText("{}".format(nowDateTime.hour))minutesInput.setText("{}".format(nowDateTime.minute))secondInput.setText("{}".format(nowDateTime.second))zhanShi.setCurrentIndex(GetShiChen(int(hourInput.text())).num - 1)月将 = GetLi(int(yearInput.text()), int(monthInput.text()), int(dayInput.text()), int(hourInput.text()),           int(minutesInput.text()), int(secondInput.text()))[4]yueJiang.setCurrentIndex(月将.num - 1)# Connect event for buttondef onclick():    # print(yearInput.text()=="")    year = int("0{}".format(yearInput.text()))    month = int("0{}".format(monthInput.text()))    day = int("0{}".format(dayInput.text()))    hour = int("0{}".format(hourInput.text()))    minutes = int("0{}".format(minutesInput.text()))    second = int("0{}".format(secondInput.text()))    if year < 1920 or year > 2100 or \            month < 1 or month > 12 or \            day < 1 or day > 31 or \            hour < 0 or hour > 23 or \            minutes < 0 or minutes > 59 or \            second < 0 or second > 59 :        QtWidgets.QMessageBox.information(None, "OK", "输入时间不正确",                                          QtWidgets.QMessageBox.Ok, QtWidgets.QMessageBox.Ok)        return    timeString = "{0}-{1:02d}-{2:02d} {3:02d}:{4:02d}:{5:02d}".format(year, month, day, hour, minutes,second)    try:        datetime.datetime.strptime(timeString, "%Y-%m-%d %H:%M:%S")    except ValueError as e:        QtWidgets.QMessageBox.information(None, "OK", "输入时间{}不正确".format(timeString),                                          QtWidgets.QMessageBox.Ok, QtWidgets.QMessageBox.Ok)        return    月将=DiZHiList[yueJiang.currentIndex()]    占时=DiZHiList[zhanShi.currentIndex()]    昼占=True    占测的事 = 占测的事Input.text()    if zhouZhan.currentIndex()==1:        昼占=False    命局=False    if mingJu.currentIndex()==1:        命局 = True    if 命局:        s = MinGPan(year, month, day, hour, minutes,second,月将,占时,昼占, 占测的事)    else:        s = ShiPan(year, month, day, hour, minutes,second,月将,占时,昼占, 占测的事)    # print(string(shiPan))    textBrowser.setHtml(s.toHml)#     textBrowser.setText("{}".format(s))button.clicked.connect(onclick)# // Set main widget as the central widget of the windowwindow.setCentralWidget(mainWidget)## // Show the windowwindow.show()## // Execute appapp.exec()